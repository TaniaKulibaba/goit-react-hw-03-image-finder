{"version":3,"sources":["services/PixabayApi.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Searchbar/Searchbar.js","components/Button/Button.js","components/Modal/Modal.js","App.js","index.js"],"names":["searchQuery","currentPage","page","axios","get","then","response","data","hits","ImageGalleryItem","src","srcLarge","onClick","className","data-source","alt","ImageGallery","items","children","map","id","webformatURL","largeImageURL","Searchbar","state","query","handleChange","e","setState","currentTarget","value","handleSubmit","preventDefault","props","onSubmit","this","type","autoComplete","autoFocus","placeholder","onChange","Component","Button","modalRoot","document","querySelector","Modal","handleKeyDown","code","console","log","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","App","images","isLoading","showModal","largeImg","error","onChangeQuery","fetchImg","options","PixabayApi","prevState","scrollTo","top","documentElement","scrollHeight","behavior","catch","finally","handleOpenModal","dataset","source","handleCloseModal","prevProps","color","height","width","timeout","length","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.78526386.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\nconst fetchImg = ({ searchQuery = '', currentPage = 1, page = 12 }) => {\r\n    return axios\r\n        .get(`https://pixabay.com/api/?key=20845173-2ff0065230e334edab9236e38&q=${searchQuery}&image_type=photo&per_page=${page}&page=${currentPage}`,\r\n)\r\n        .then(response => response.data.hits)\r\n};\r\n\r\nexport default { fetchImg };","const ImageGalleryItem = ({ src, srcLarge, onClick }) => {\r\n  return (\r\n    <li className=\"ImageGalleryItem\" onClick={onClick}>\r\n      <img\r\n        src={src}\r\n        data-source={srcLarge}\r\n        alt=\"\"\r\n        className=\"ImageGalleryItem-image\"\r\n      />\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default ImageGalleryItem;","import ImageGalleryItem from \"../ImageGalleryItem/ImageGalleryItem\";\r\n\r\nconst ImageGallery = ({ items, onClick, children }) => {\r\n  return (\r\n    <>\r\n      <ul className=\"ImageGallery\">\r\n        {items.map(({ id, webformatURL, largeImageURL }) => (\r\n          <ImageGalleryItem\r\n            onClick={onClick}\r\n            key={id}\r\n            src={webformatURL}\r\n            srcLarge={largeImageURL}\r\n          />\r\n        ))}\r\n      </ul>\r\n      {children}\r\n    </>\r\n  );\r\n};\r\nexport default ImageGallery;","import React, { Component } from 'react';\r\n\r\nclass Searchbar extends Component {\r\n    state = { query: '' };\r\n\r\n    handleChange = e => {\r\n        this.setState({ query: e.currentTarget.value });\r\n    };\r\n\r\n    handleSubmit = e => {\r\n      e.preventDefault();\r\n      this.props.onSubmit(this.state.query);\r\n      this.setState({ query: '' });\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <header className=\"Searchbar\">\r\n              <form className=\"SearchForm\" onSubmit={this.handleSubmit}>\r\n                <button type=\"submit\" className=\"SearchForm-button\">\r\n                  <span className=\"SearchForm-button-label\">Search</span>\r\n                </button>\r\n            \r\n                <input\r\n                    className=\"SearchForm-input\"\r\n                    type=\"text\" \r\n                    autoComplete=\"off\"\r\n                    autoFocus\r\n                    placeholder=\"Search images and photos\"\r\n                    value={this.state.query}     \r\n                    onChange={this.handleChange}\r\n                />\r\n              </form>\r\n            </header>\r\n        )\r\n    }\r\n};\r\n\r\nexport default Searchbar;","const Button = ({ onClick, type = \"button\" }) => {\r\n  return (\r\n    <button onClick={onClick} className=\"Button\" type={type}>\r\n      Load more\r\n    </button>\r\n  );\r\n};\r\nexport default Button;","import React, { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nclass Modal extends Component {\r\n    componentDidMount() {\r\n        console.log('Modal componentDidMount');\r\n        window.addEventListener('keydown', this.handleKeyDown);\r\n    };\r\n\r\n    componentWillUnmount() {\r\n        console.log('Modal componentWillUnmount');\r\n        window.removeEventListener('keydown', this.handleKeyDown);\r\n    };\r\n    \r\n    handleKeyDown = e => {\r\n        if (e.code === 'Escape') {\r\n            console.log('Нажали ESC, нужно закрыть модалку');\r\n            this.props.onClose();\r\n        }\r\n    };\r\n\r\n    handleBackdropClick = e => {\r\n    //    console.log('Кликнули в бекдроп');\r\n\r\n    //    console.log('currentTarget: ', e.currentTarget);\r\n    //    console.log('target: ', e.target);\r\n\r\n        if (e.currentTarget === e.target) {\r\n            this.props.onClose();\r\n        }\r\n    };\r\n\r\n\r\n\r\n    render() {\r\n        return createPortal(\r\n            <div className=\"Overlay\" onClick={this.handleBackdropClick}>\r\n                <div className=\"Modal\">\r\n                    <img className=\"Modal-img\" src={this.props.src} alt=\"\" />\r\n                </div>\r\n            </div>,\r\n            modalRoot,\r\n        );\r\n    }\r\n}\r\n\r\nexport default Modal;","import React, { Component } from 'react';\nimport Loader from 'react-loader-spinner';\nimport PixabayApi from './services/PixabayApi';\nimport ImageGallery from './components/ImageGallery/ImageGallery';\nimport Searchbar from './components/Searchbar';\nimport Button from './components/Button';\nimport Modal from './components/Modal';\n\n\n\nclass App extends Component {\n  state = {\n    images: [],\n    currentPage: 1,\n    searchQuery: '',\n    isLoading: false,\n    showModal: false,\n    largeImg: '',\n    error: null,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.searchQuery !== this.state.searchQuery) {\n      this.fetchImg();\n    }\n  }\n\n  onChangeQuery = query => {\n    this.setState({ searchQuery: query, currentPage: 1, images: [], error: null });\n  }\n\n  fetchImg = () => {\n    const { currentPage, searchQuery } = this.state;\n    const options = { searchQuery, currentPage };\n\n    this.setState({ isLoading: true });\n\n    PixabayApi.fetchImg(options)\n      .then(images => {\n        this.setState(prevState => ({\n          images: [...prevState.images, ...images],\n          currentPage: prevState.currentPage + 1,\n        }));\n      })\n      .then(() => {\n        if (currentPage > 1) {\n          window.scrollTo({\n            top: document.documentElement.scrollHeight,\n            behavior: \"smooth\",\n          });\n        }\n      })\n      .catch(error => this.setState({ error }))\n      .finally(() => this.setState({ isLoading: false }));\n  }\n\n\n  handleOpenModal = (e) => {\n    this.setState({\n      showModal: true,\n      largeImg: e.target.dataset.source,\n    });\n  };\n  handleCloseModal = () => {\n    this.setState({\n      showModal: false,\n      largeImg: '',\n    });\n  };\n\n  render() {\n    const { images, isLoading, error,  showModal, largeImg  } = this.state;\n      return (\n        <div className=\"App\">\n          {error && <h1>Error!!!</h1>}\n          <Searchbar onSubmit={this.onChangeQuery} />\n          <ImageGallery onClick={this.handleOpenModal} items={images}>\n            {isLoading && (\n              <Loader\n                className=\"Spinner\"\n                type=\"TailSpin\"\n                color=\"Blue\"\n                height={100}\n                width={100}\n                timeout={3000}\n              />\n            )}\n          {images.length > 0 && (<Button onClick={this.fetchImg} />)}            \n          </ImageGallery>\n\n          {showModal && (<Modal onClose={this.handleCloseModal} src={largeImg} />) }\n      </div>\n    )\n  }\n};\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './styles.css';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}